(this["webpackJsonpwallet-transfer"]=this["webpackJsonpwallet-transfer"]||[]).push([[0],{344:function(e,t,n){},345:function(e,t,n){},374:function(e,t){},376:function(e,t){},386:function(e,t){},388:function(e,t){},415:function(e,t){},417:function(e,t){},445:function(e,t){},45:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return h}));var r=n(29),a=n(46),c=n(55),s=n(39),o=n.n(s),i=n(351),u=n(633).BITBOX,l=function(e){return new o.a(e).multipliedBy(1e8)};function d(e,t,n,r,a){return p.apply(this,arguments)}function p(){return(p=Object(a.a)(Object(r.a)().mark((function t(n,a,s,o,u){var d,p,x,j,m,g,O,v,w,y,k,S,B,C,D,E,T,I,H,z;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d=c.IS_DEV?"testnet":"mainnet",p=new i({restURL:c.IS_DEV?"https://testnet3.fullstack.cash/v5/":"https://bchn.fullstack.cash/v5/"}),t.next=5,b(n,!1);case 5:return x=t.sent,j=l(s),console.log(j.c[0]),x<=0&&(console.log("Balance of sending address is zero. Exiting."),e.exit(0)),""===a&&(a=n),t.next=12,p.Mnemonic.toSeed(u);case 12:return g=t.sent,m=p.HDNode.fromSeed(g,d),O=m.derivePath("m/44'/145'/0'/0/0"),v=p.HDNode.toCashAddress(O),t.next=18,p.Electrumx.utxo(v);case 18:if(0!==(w=t.sent).utxos.length){t.next=21;break}throw new Error("No UTXOs found.");case 21:return y="mainnet"===d?new p.TransactionBuilder:new p.TransactionBuilder(d),k=j.c[0],S=0,B=[],w.utxos.map((function(e){var t=e;B.push(t),S+=t.value,y.addInput(t.tx_hash,t.tx_pos)})),t.next=28,h(n);case 28:if(C=t.sent,D=C.safe,!(S-D<0)){t.next=33;break}return console.log("Transaction fee costs more combined UTXOs. Can't send transaction."),t.abrupt("return");case 33:return y.addOutput(a,k),y.addOutput(n,S-k-D),t.next=37,f(u);case 37:return E=t.sent,T=p.HDNode.toKeyPair(E),B.forEach((function(e,t){y.sign(t,T,undefined,y.hashTypes.SIGHASH_ALL,e.value)})),I=y.build(),H=I.toHex(),console.log("hex",H),t.next=45,p.RawTransactions.sendRawTransaction([H]);case 45:return z=t.sent,console.log("Transaction ID: ".concat(z)),console.log(""),t.abrupt("return",z);case 51:t.prev=51,t.t0=t.catch(0),console.log("error: ",t.t0);case 54:case"end":return t.stop()}}),t,null,[[0,51]])})))).apply(this,arguments)}function b(e){return x.apply(this,arguments)}function x(){return(x=Object(a.a)(Object(r.a)().mark((function e(t){var n,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Address from main page =",t),n=new i({restURL:c.IS_DEV?"https://testnet3.fullstack.cash/v5/":"https://bchn.fullstack.cash/v5/"}),e.next=5,n.Electrumx.balance(t);case 5:return a=e.sent,console.log(JSON.stringify(a,null,2)),e.abrupt("return",j(a.balance.confirmed));case 10:return e.prev=10,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return","cannot compute");case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function f(e){var t,n=new u({restURL:c.IS_DEV?"https://testnet3.fullstack.cash/v5/":"https://bchn.fullstack.cash/v5/"}),r=n.Mnemonic.toSeed(e),a=c.IS_DEV?"testnet":"mainnet";t=n.HDNode.fromSeed(r,a);var s=n.HDNode.derivePath(t,"m/44'/145'/0'");return n.HDNode.derivePath(s,"0/0")}var j=function(e){return new o.a(e).dividedBy(1e8)};function h(e){return new Promise(function(){var t=Object(a.a)(Object(r.a)().mark((function t(n,a){var s,u,l,d;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("cash",e),void 0===e&&n({avg:0,fast:0,safe:0}),s=new i({restURL:c.IS_DEV?"https://testnet3.fullstack.cash/v5/":"https://bchn.fullstack.cash/v5/"}),t.next=6,s.Electrumx.utxo(e);case 6:u=t.sent,l=s.BitcoinCash.getByteCount({P2PKH:u.utxos.length},{P2PKH:2}),console.log("Transaction byte count: ".concat(l)),1.2,d=Math.floor(1.2*l),n({avg:new o.a(d).plus(100).toNumber(),fast:new o.a(d).plus(200).toNumber(),safe:new o.a(d).toNumber()}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),a(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e,n){return t.apply(this,arguments)}}())}}).call(this,n(12))},488:function(e,t){},490:function(e,t){},497:function(e,t){},498:function(e,t){},55:function(e,t){e.exports={network:"testnet",isDev:!1}},732:function(e,t){},754:function(e,t,n){"use strict";n.r(t);var r,a,c,s,o,i,u=n(0),l=n(331),d=n.n(l),p=(n(344),n(345),n(54)),b=n(29),x=n(46),f=n(22),j=n(56),h=n(757),m=n(756),g=n(70),O=n(164),v=n(69),w=n.n(v),y=n(45),k=n(334),S=n(1);function B(){return Object(S.jsx)(k.a,{animation:"border",role:"status",children:Object(S.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}var C=function(){var e=Object(u.useState)(""),t=Object(f.a)(e,2),n=t[0],r=t[1],a=Object(u.useState)(!1),c=Object(f.a)(a,2),s=c[0],o=c[1],i=Object(u.useState)(""),l=Object(f.a)(i,2),d=l[0],p=l[1],j=Object(u.useState)(0),m=Object(f.a)(j,2),v=m[0],k=m[1],C=Object(u.useState)("0"),z=Object(f.a)(C,2),A=z[0],N=z[1],F=Object(u.useState)(""),P=Object(f.a)(F,2),L=P[0],R=P[1],_=Object(u.useState)(0),M=Object(f.a)(_,2),U=M[0],V=M[1];Object(u.useEffect)((function(){try{var e=function(){var e=Object(x.a)(Object(b.a)().mark((function e(){var t,n;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.a)(d,!1);case 2:return t=e.sent,e.next=5,Object(y.b)(d);case 5:n=e.sent,V((1e8*t-n.safe)/1e8),N(t.toString()),console.log("Here is the balance",t.toString()),console.log("Here is the fee",n.safe),console.log("Here is the max amount",U);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}catch(t){w.a.fire({title:"Failed!!!",text:t.message,icon:"error"}),N(0)}}),[d,v,U]);var J=function(){var e=Object(x.a)(Object(b.a)().mark((function e(t){var r,a,c,s;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=String(parseFloat(v).toFixed(7)),e.next=3,Object(y.a)(d);case 3:return a=e.sent,c=String(parseFloat(a).toFixed(7)),t.preventDefault(),e.prev=6,console.log("address =",n),console.log("amount =",n),console.log("mnemonics =",L),e.next=12,Object(y.c)(d,n,r,c,L);case 12:s=e.sent,w.a.fire({title:"Sent!!!",text:"Transaction successful. Transaction ID : ".concat(s),icon:"success"}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),w.a.fire({title:"Failed!!!",text:"Transaction Failed.",icon:"error"});case 19:document.getElementById("form").reset();case 20:case"end":return e.stop()}}),e,null,[[6,16]])})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(x.a)(Object(b.a)().mark((function e(t){var r;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),o(!0),console.log("Bal check mnemonics =",L),e.prev=3,e.next=6,Object(y.a)(n);case 6:r=e.sent,console.log("bal =",r),w.a.fire({title:"Balance",text:"Your balance is : ".concat(r," BCH"),icon:"success"}),o(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),w.a.fire({title:"Failed!!!",text:"Error getting Balance.",icon:"warning"});case 15:document.getElementById("bal-form").reset();case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(D,{children:Object(S.jsx)(E,{children:Object(S.jsxs)(g.a,{border:"primary",style:{width:"36rem"},children:[Object(S.jsxs)(g.a.Body,{children:[Object(S.jsxs)(g.a.Title,{children:[" ",Object(S.jsx)("h1",{children:"Wallet Pay"})]}),Object(S.jsx)(g.a.Text,{children:"Send BCH to any address."})]}),Object(S.jsx)(O.a,{className:"list-group-flush",children:Object(S.jsxs)(h.a,{id:"form",children:[Object(S.jsx)(T,{children:Object(S.jsx)(h.a.Control,{type:"text",placeholder:"Sender's Address",size:"sm",name:"Receiver's Address",onChange:function(e){return p(e.target.value)}})}),Object(S.jsx)("br",{}),Object(S.jsxs)(O.a.Item,{children:["Balance: ",A]}),Object(S.jsx)("br",{}),Object(S.jsx)(T,{children:Object(S.jsx)(h.a.Control,{type:"text",placeholder:"Receiver's Address",size:"sm",name:"Receiver's Address",onChange:function(e){return r(e.target.value)}})}),Object(S.jsx)("br",{}),Object(S.jsx)(T,{children:Object(S.jsx)(h.a.Control,{type:"number",placeholder:"Amount to Send",size:"sm",name:"Amount",onChange:function(e){return k(e.target.value)},value:v,id:"amount"})}),Object(S.jsx)("br",{}),Object(S.jsx)(H,{variant:"light",onClick:function(e){e.preventDefault();try{k(U),document.getElementById("amount").value=U,console.log("maxAmt =",U)}catch(t){console.log("Error setting max amount")}},size:"sm",style:{marginBottom:"10px"},children:"Send Max"}),Object(S.jsx)("br",{}),Object(S.jsx)(T,{children:Object(S.jsx)(h.a.Control,{type:"textarea",placeholder:"Mnemonics",size:"sm",name:"Mnemonics",onChange:function(e){return R(e.target.value)}})}),Object(S.jsxs)(I,{children:[Object(S.jsx)(H,{variant:"dark",onClick:J,size:"sm",children:"Send"}),Object(S.jsx)("br",{})]})]})}),Object(S.jsx)(g.a.Body,{children:Object(S.jsxs)(h.a,{id:"bal-form",children:[Object(S.jsx)(T,{children:Object(S.jsx)(h.a.Control,{type:"text",placeholder:"Address",size:"sm",name:"Address",onChange:function(e){return r(e.target.value)}})}),Object(S.jsx)(I,{children:Object(S.jsx)(H,{variant:"light",onClick:K,size:"sm",children:s?Object(S.jsx)(B,{}):"Check Balance"})})]})})]})})})})},D=j.a.div(r||(r=Object(p.a)(["\n  padding: 30px 0px;\n  display: flex;\n  flex-direction: row;\n  @media (max-width: 768px) {\n    padding: 0;\n    margin: 0;\n  }\n  input::placeholder,\n  textarea::placeholder {\n    color: rgb(221, 221, 221);\n  }\n"]))),E=j.a.div(a||(a=Object(p.a)(["\n  margin: auto;\n  padding: 20px;\n  border: 3px solid #000000;\n  border-radius: 10px;\n"]))),T=j.a.div(c||(c=Object(p.a)(['\n  margin: auto;\n  text-align: center;\n  border: 1px solid #113d8a;\n  box-sizing: border-box;\n  border-radius: 5px;\n  input[type="number"]::-webkit-outer-spin-button,\n  input[type="number"]::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n  input[type="number"] {\n    -moz-appearance: none;\n  }\n  > input {\n    border-radius: 5px;\n    font-size: 16px;\n    padding: 10px 15px;\n    border: none;\n  }\n  > textarea {\n    resize: none;\n    border-radius: 5px;\n    font-size: 16px;\n    padding: 10px 15px;\n    width: 100%;\n    height: 287px;\n  }\n']))),I=j.a.div(s||(s=Object(p.a)(["\n  padding-top: 30px;\n  padding-bottom: 40px;\n  text-align: center;\n  @media (max-width: 768px) {\n    text-align: center;\n    padding-top: 10px;\n  }\n"]))),H=(j.a.div(o||(o=Object(p.a)(["\npadding-top: 10px;  \npadding-bottom: 10px;\n  text-align: right;\n  @media (max-width: 768px) {\n    text-align: center;\n    padding-top: 10px;\n  }\n"]))),Object(j.a)(m.a)(i||(i=Object(p.a)(["\n  padding: 10px 45px;\n  border-radius: 10px;\n  color: #ffffff;\n  border: none;\n  background: #1240c2;\n  text-align: center;\n  @media (max-width: 768px) {\n    margin: 50px 0;\n  }\n  :hover {\n    color: pink;\n  }\n"]))));var z=function(){return Object(S.jsx)("div",{className:"App",children:Object(S.jsx)(C,{})})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,758)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};n(753);d.a.render(Object(S.jsx)(z,{}),document.getElementById("root")),A()}},[[754,1,2]]]);
//# sourceMappingURL=main.3ed89f91.chunk.js.map